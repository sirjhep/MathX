(function(){var script=document.createElement('script');script.type='text/javascript';script.src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full';document.getElementsByTagName('head')[0].appendChild(script);script.onload=function(){MathJax.Hub.Config({showProcessingMessages:false});MathJax.Hub.Queue(function(){AttachClickEventToJax();})};var AttachClickEventToJax=function(id){var elems=(id)?[document.getElementById(id)]:document.getElementsByClassName("MathJax");for(var i in elems){elems[i].onfocus=function(e){this.click();};elems[i].onclick=function(e){CreateMathJaxEditor(this,false)}}};window.CreateMathJaxEditor=function(frame,newjax){var jax=(newjax)?false:MathJax.Hub.getJaxFor(frame.id),table=document.createElement('table'),tr1=document.createElement('tr'),tr2=document.createElement('tr'),td1=document.createElement('td'),td2=document.createElement('td'),input=document.createElement('input');table.appendChild(tr1);table.appendChild(tr2);tr1.appendChild(td1);tr2.appendChild(td2);td1.appendChild(input);frame.parentNode.insertBefore(table,frame);frame.style.display="None";table.style.display='inline-table';td2.style.border="1px solid black";td2.style.padding="5px 5px";if(newjax){input.placeholder="Insert expression here...";input.value="";}
else
input.value=jax.originalText;input.id="MathXEditor-Input";input.style.width="100%";input.type='text';input.readOnly=false;td2.id='MathXEditor-Preview';td2.innerHTML='`'+input.value+'`';MathJax.Hub.Typeset('MathXEditor-Preview');input.focus();input.oninput=function(e){td2.innerHTML='`'+this.value+'`';MathJax.Hub.Typeset('MathXEditor-Preview');}
input.onkeydown=function(e){if(e.keyCode==13){this.blur();}}
input.onblur=function(e){if(newjax){var txtnode=document.createTextNode('`'+this.value+'`');frame.parentNode.replaceChild(txtnode,table);MathJax.Hub.Queue(["Typeset",MathJax.Hub,txtnode.parentNode])
MathJax.Hub.Queue(function(){AttachClickEventToJax();});}else{MathJax.Hub.Queue(["Text",jax,this.value]);frame.style.display="inline";MathJax.Hub.Queue(function(){AttachClickEventToJax(jax.inputID+'-Frame');});}
table.remove();}}})();